<!DOCTYPE html>

<link rel=stylesheet type='text/css' href='style.css'></link>

<html lang="en">
<head>
  <meta charset="utf-8">
  <title>WebSockets Demo</title>
</head>
<body ng-app='app'>
  <div id="page-wrapper">
    <h1>WebDump</h1>

    <ul id="messages"></ul>
	<div ng-controller='demo' ng-init='initialize()'>
		<button ng-click='moveToTrash()'>Move to trash</button>
		<button ng-click='addMessage()'>Add message</button>

	    <h2>Messages</h2>
		<h3>
			<button ng-click='toggleTrashVisibility()'>
				{{trashVisible ? '-' : '+'}}
			</button>
			Trash ({{trash.length}} items)
			<button ng-click='restoreTrash()'>Restore</button>
			<button ng-click='emptyTrash()'>Empty trash</button>
		</h3>
			<message-list ng-show='trashVisible' list='trash'></message-list>
		<h3>Dumps</h3>
			<message-list list='messages'></message-list>

	</div>

</body>
</html>

<script src='js/jquery-2.2.1.min.js'></script>
<script src='js/angular.min.js'></script>


<script type="text/javascript">

angular.module('app', [])
.controller('demo',[ '$scope', function($scope) {
	$scope.messages = [];
	$scope.trash = [];
	$scope.id = 1;
	$scope.trashVisible = false;

	$scope.addMessage = function() {
	    var message = { id: $scope.id, content: "Message #" + $scope.id++ };
		$scope.messages.push(message);
	}
	$scope.moveToTrash = function() {
		$scope.trash = $scope.trash.concat($scope.messages);
		$scope.messages = [];
	}
	$scope.toggleTrashVisibility = function() {
		$scope.trashVisible = !$scope.trashVisible;
	}
	$scope.emptyTrash = function() {
		$scope.trash = [];
	}
	$scope.restoreTrash = function() {
		$scope.messages = $scope.trash.concat($scope.messages);
		$scope.emptyTrash();
	}

	$scope.initialize = function() {
		$scope.addMessage();
		$scope.addMessage();
		$scope.addMessage();
		$scope.addMessage();
		$scope.moveToTrash();
		$scope.addMessage();	
	}
	
} ] )
// message-list template directive
.directive('messageList', function() {
	return {
		restrict: 'E',
		scope: { list : '=' },
		template: "<div ng-repeat='model in list'>"
		+"	<div id='mess{{model.id}}'>{{model.content}}</div>"
		+"<\div>"
	}
} );


</script>